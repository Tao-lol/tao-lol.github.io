<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    
    <title>Docker 实战总结 | Blog | tao-lol</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="Docker">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/css/style.css?v=1.4.4">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	false,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":"codefine","repo":"gitment","oauth":{"client_id":null,"client_secret":null},"perPage":10}'),
            d: JSON.parse('{"app_id":null}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">濤</h5>
          <a href="mailto:tao-lol@qq.com" title="tao-lol@qq.com" class="mail">
            
              <span>t</span>
            
              <span>a</span>
            
              <span>o</span>
            
              <span>-</span>
            
              <span>l</span>
            
              <span>o</span>
            
              <span>l</span>
            
              <span>@</span>
            
              <span>q</span>
            
              <span>q</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/Tao-lol" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                HOME
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                CATEGORIES
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                TAGS
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                ARCHIVES
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>Docker 实战总结</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">Docker 实战总结</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-12-19T06:54:13.000Z" itemprop="datePublished" class="page-time">
  2019-12-19
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/编程/">编程</a></li></ul>

            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-DockerSummary"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">Docker 实战总结</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-12-19 14:54:13" datetime="2019-12-19T06:54:13.000Z"  itemprop="datePublished">2019-12-19</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/编程/">编程</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <blockquote>
<p><a href="https://www.cnblogs.com/leozhanggg/p/12039953.html" target="_blank" rel="noopener">https://www.cnblogs.com/leozhanggg/p/12039953.html</a></p>
</blockquote>
<a id="more"></a>

<p><strong>目录</strong></p>
<ol>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-简介">Docker 简介</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-优势">Docker 优势</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-基本概念">Docker 基本概念</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-安装使用">Docker 安装使用</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-常用命令">Docker 常用命令</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-镜像构建">Docker 镜像构建</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-本地仓库">Docker 本地仓库</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-与图形管理工具-Portainer">Docker 图形管理工具 Portainer</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-与集群管理工具-Swarm">Docker 集群管理工具 Swarm</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-运维流程图">Docker 运维流程图</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-配置管理">Docker 配置管理</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-后续问题">Docker 后续问题</a></li>
<li><a href="https://tao-lol.top/2019/12/19/DockerSummary/#Docker-报错解决">Docker 报错解决</a></li>
</ol>
<h1 id="Docker-简介"><a href="#Docker-简介" class="headerlink" title="Docker 简介"></a>Docker 简介</h1><p>&emsp;&emsp;<strong>Docker 是一个开源的应用容器引擎，开发者可以打包自己的应用到容器里面，然后迁移到其他机器的 docker 应用中，可以实现快速部署。</strong><br>&emsp;&emsp;简单的理解，docker 就是一个软件集装箱化平台，就像船只、火车、卡车运输集装箱而不论其内部的货物一样，软件容器充当软件部署的标准单元，其中可以包含不同的代码和依赖项。<br>&emsp;&emsp;按照这种方式容器化软件，开发人员和 IT 专业人员只需进行极少修改或不修改，即可将其部署到不同的环境，如果出现的故障，也可以通过镜像，快速恢复服务。</p>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191109172555889-1603196756.png" title="" data-fancybox="images"><img src="1059616-20191109172555889-1603196756.png" alt title class></a>
                <p></p>
            </figure>

<h1 id="Docker-优势"><a href="#Docker-优势" class="headerlink" title="Docker 优势"></a>Docker 优势</h1><h2 id="特性优势"><a href="#特性优势" class="headerlink" title="特性优势"></a>特性优势</h2><figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191109172604637-1990244867.png" title="" data-fancybox="images"><img src="1059616-20191109172604637-1990244867.png" alt title class></a>
                <p></p>
            </figure>

<h2 id="资源优势"><a href="#资源优势" class="headerlink" title="资源优势"></a>资源优势</h2><figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112151326588-965047543.png" title="" data-fancybox="images"><img src="1059616-20191112151326588-965047543.png" alt title class></a>
                <p></p>
            </figure>

<h1 id="Docker-基本概念"><a href="#Docker-基本概念" class="headerlink" title="Docker 基本概念"></a>Docker 基本概念</h1><p>&emsp;&emsp;<strong>Client（客户端）</strong>：是 Docker 的用户端，可以接受用户命令和配置标识，并与 Docker daemon 通信。<br>&emsp;&emsp;<strong>Images（镜像）</strong>：是一个只读模板，含创建 Docker 容器的说明，它与操作系统的安装光盘有点像。<br>&emsp;&emsp;<strong>Containers（容器）</strong>：镜像的运行实例，镜像与容器的关系类比面向对象中的类和对象。<br>&emsp;&emsp;<strong>Registry（仓库）</strong>：是一个集中存储与分发镜像的服务。最常用的 Registry 是官方的 Docker Hub。</p>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191109172624159-620464653.png" title="" data-fancybox="images"><img src="1059616-20191109172624159-620464653.png" alt title class></a>
                <p></p>
            </figure>

<h1 id="Docker-安装使用"><a href="#Docker-安装使用" class="headerlink" title="Docker 安装使用"></a>Docker 安装使用</h1><h2 id="操作系统：CentOS-7"><a href="#操作系统：CentOS-7" class="headerlink" title="操作系统：CentOS 7"></a>操作系统：CentOS 7</h2><ol>
<li><p>安装依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加软件源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo　　# 指定阿里云镜像源</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 docker-ce（对系统内核有一定要求，centos6 不支持）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all  yum makecache fast        # 重新生成缓存</span><br><span class="line">yum -y install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置自启并启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable docker</span><br><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112154320701-108250532.png" title="" data-fancybox="images"><img src="1059616-20191112154320701-108250532.png" alt title class></a>
                <p></p>
            </figure>

<h2 id="运行示例：Nginx"><a href="#运行示例：Nginx" class="headerlink" title="运行示例：Nginx"></a>运行示例：Nginx</h2><ol>
<li>搜索并下载镜像<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search nginx</span><br><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112154517806-1605394976.png" title="" data-fancybox="images"><img src="1059616-20191112154517806-1605394976.png" alt title class></a>
                <p></p>
            </figure>

<ol start="2">
<li>启动一个容器并映射端口到本地<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:80 --name Nginx nginx　　　　# 参数详解见下文</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112154526743-736147967.png" title="" data-fancybox="images"><img src="1059616-20191112154526743-736147967.png" alt title class></a>
                <p></p>
            </figure>

<ol start="3">
<li>访问本地映射端口<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112154531659-814379855.png" title="" data-fancybox="images"><img src="1059616-20191112154531659-814379855.png" alt title class></a>
                <p></p>
            </figure>

</li>
</ol>
<h1 id="Docker-常用命令"><a href="#Docker-常用命令" class="headerlink" title="Docker 常用命令"></a>Docker 常用命令</h1><h2 id="镜像控制"><a href="#镜像控制" class="headerlink" title="镜像控制"></a>镜像控制</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">搜索镜像：docker  search  [OPTIONS]  TERM</span><br><span class="line">上传镜像：docker  push  [OPTIONS]  NAME[:TAG]</span><br><span class="line">下载镜像：docker  pull  [OPTIONS]  NAME[:TAG]</span><br><span class="line">提交镜像：docker  commit [OPTIONS]  CONTAINER  NAME[:TAG]</span><br><span class="line">构建镜像：docker  build  [OPTIONS]  PATH</span><br><span class="line">删除镜像：docker  rmi [OPTIONS]  IMAGE  [IMAGE...]</span><br><span class="line">增加镜像标签：docker  tag  SOURCE_IMAGE[:TAG]  TARGET_IMAGE[:TAG]</span><br><span class="line">查看所有镜像：docker  images  [OPTIONS]  [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure>

<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112155412834-338762946.png" title="" data-fancybox="images"><img src="1059616-20191112155412834-338762946.png" alt title class></a>
                <p></p>
            </figure>

<h2 id="容器控制"><a href="#容器控制" class="headerlink" title="容器控制"></a>容器控制</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">启动/重启容器：docker start/restart CONTAINER</span><br><span class="line">停止/强停容器：docker stop/ kill CONTAINER</span><br><span class="line">删除容器：docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line">重命名容器：docker rename CONTAINER CONTAINER_NEW</span><br><span class="line">进入容器：docker attach CONTAINER</span><br><span class="line">执行容器命令：docker exec CONTAINER COMMAND</span><br><span class="line">查看容器日志：docker logs [OPTIONS] CONTAINER</span><br><span class="line">查看容器列表：docker ps [OPTIONS]</span><br></pre></td></tr></table></figure>

<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112155423874-350386050.png" title="" data-fancybox="images"><img src="1059616-20191112155423874-350386050.png" alt title class></a>
                <p></p>
            </figure>

<h2 id="容器启动"><a href="#容器启动" class="headerlink" title="容器启动"></a>容器启动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker  run  [OPTIONS]  IMAGE  [COMMAND]  [ARG...]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-d</code>：后台运行容器，并返回容器 ID</li>
<li><code>-i</code>：以交互模式运行容器，通常与 <code>-t</code> 同时使用</li>
<li><code>-t</code>：为容器重新分配一个伪输入终端，通常与 <code>-i</code> 同时使用</li>
<li><code>-v</code>：绑定挂载目录</li>
<li><code>--name=&quot;mycontainer&quot;</code>：为容器指定一个名称</li>
<li><code>--net=&quot;bridge&quot;</code>：指定容器的网络连接类型，支持如下：<br><code>bridge</code> / <code>host</code> / <code>none</code> / <code>container:&lt;name|id&gt;</code></li>
<li><code>-p</code>/<code>-P</code>：端口映射，格式如图：<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112155237442-1935865842.png" title="" data-fancybox="images"><img src="1059616-20191112155237442-1935865842.png" alt title class></a>
                <p></p>
            </figure>

</li>
</ul>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查看 docker 信息：docker info</span><br><span class="line">docker 命令帮助：docker run --help</span><br><span class="line">复制文件到容器：docker cp custom.conf Nginx:/etc/nginx/conf.d/</span><br><span class="line">更新容器启动项：docker container update --restart=always nginx</span><br><span class="line">查看 docker 日志：tail -f /var/log/messages</span><br></pre></td></tr></table></figure>

<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112161415759-1267729284.png" title="" data-fancybox="images"><img src="1059616-20191112161415759-1267729284.png" alt title class></a>
                <p></p>
            </figure>

<blockquote>
<p>更多可以参考官网：<a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/cli/</a> </p>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191214150000098-1909876776.png" title="" data-fancybox="images"><img src="1059616-20191214150000098-1909876776.png" alt title class></a>
                <p></p>
            </figure>
</blockquote>
<h1 id="Docker-镜像构建"><a href="#Docker-镜像构建" class="headerlink" title="Docker 镜像构建"></a>Docker 镜像构建</h1><h2 id="Docker-commit（1-运行-2-修改-3-保存）"><a href="#Docker-commit（1-运行-2-修改-3-保存）" class="headerlink" title="Docker commit（1 运行 2 修改 3 保存）"></a>Docker commit（1 运行 2 修改 3 保存）</h2><ol>
<li><p>运行容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit -p 8080:80 --name Nginx nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改容器（这里我只是做个演示，所以就复制一下文件，具体修改需要根据你实际情况）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp custom.conf Nginx:/etc/nginx/conf.d/</span><br></pre></td></tr></table></figure>
</li>
<li><p>将容器保存为新的镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit Nginx zwx/nginx</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112155640841-516876073.png" title="" data-fancybox="images"><img src="1059616-20191112155640841-516876073.png" alt title class></a>
                <p></p>
            </figure>

<h2 id="Dockerfile（1-编写-2-构建）"><a href="#Dockerfile（1-编写-2-构建）" class="headerlink" title="Dockerfile（1 编写 2 构建）"></a>Dockerfile（1 编写 2 构建）</h2><ol>
<li>编写 Dockerfile 文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim Dockerfile</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112155736158-842820092.png" title="" data-fancybox="images"><img src="1059616-20191112155736158-842820092.png" alt title class></a>
                <p></p>
            </figure>

<ol start="2">
<li>执行 Dockerfile 文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t zwx/nginx .　　　　# 后面有个点，代表当前目录下 dockerfile 文件</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112155724434-463914884.png" title="" data-fancybox="images"><img src="1059616-20191112155724434-463914884.png" alt title class></a>
                <p></p>
            </figure>

<ol start="3">
<li>Dockerfile 常用指令<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112155749441-1705248710.png" title="" data-fancybox="images"><img src="1059616-20191112155749441-1705248710.png" alt title class></a>
                <p></p>
            </figure>

</li>
</ol>
<blockquote>
<p>更多可以参考：<a href="https://www.cnblogs.com/leozhanggg/p/11820214.html" target="_blank" rel="noopener">【转载】Dockerfile 文件详解</a></p>
</blockquote>
<h1 id="Docker-本地仓库"><a href="#Docker-本地仓库" class="headerlink" title="Docker 本地仓库"></a>Docker 本地仓库</h1><ol>
<li><p>拉取镜像仓库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search registry</span><br><span class="line">docker pull registry</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动镜像服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit \</span><br><span class="line">--name=Registry \　　　　# 指定容器名称</span><br><span class="line">-p 5000:5000 \　　　　　　# 仓库默认端口是 5000，映射到宿主机，这样可以使用宿主机地址访问</span><br><span class="line">--restart=always \                # 自动重启，这样每次 docker 重启后仓库容器也会自动启动</span><br><span class="line">--privileged=true \              # 增加安全权限，一般可不加</span><br><span class="line">-v /usr/local/my_registry:/var/lib/registry  \　　　　# 把仓库镜像数据保存到宿主机</span><br><span class="line">registry</span><br></pre></td></tr></table></figure>
</li>
<li><p>注册 https 协议（需要通过本地仓库下载镜像，均需要配置）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/docker/daemon.json　　　　　　　　# 默认无此文件，需自行添加，有则追加一下内容。</span><br><span class="line">   &#123; &quot;insecure-registries&quot;:[&quot; xx.xx.xx.xx:5000&quot;] &#125;　　# 指定 ip 地址或域名</span><br></pre></td></tr></table></figure>
</li>
<li><p>新增 tag 指明仓库地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag zwx/nginx x.xx.xx.xx:5000/zwx/nginx　　# 如果构建时已经指定仓库地址，则可以省略</span><br></pre></td></tr></table></figure>
</li>
<li><p>上传镜像到本地仓库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push x.xx.xx.xx:5000/zwx/nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看本地仓库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET http://x.xx.xx.xx:5000/v2/_catalog</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112160214624-1466104232.png" title="" data-fancybox="images"><img src="1059616-20191112160214624-1466104232.png" alt title class></a>
                <p></p>
            </figure>

<blockquote>
<p>更多可以参考：<a href="https://www.jianshu.com/p/8f38f198724e" target="_blank" rel="noopener">docker 搭建本地私有仓库</a></p>
</blockquote>
<h1 id="Docker-与图形管理工具-Portainer"><a href="#Docker-与图形管理工具-Portainer" class="headerlink" title="Docker 与图形管理工具 Portainer"></a>Docker 与图形管理工具 Portainer</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>&emsp;&emsp;Portainer 是 Docker 的图形化管理工具，提供状态显示面板、应用模板快速部署、容器镜像网络数据卷的基本操作（包括上传下载镜像，创建容器等操作）、事件日志显示、容器控制台操作、Swarm 集群和服务等集中管理和操作、登录用户管理和控制等功能。功能十分全面，基本能满足中小型单位对容器管理的全部需求。</p>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112153539731-1511928488.png" title="" data-fancybox="images"><img src="1059616-20191112153539731-1511928488.png" alt title class></a>
                <p></p>
            </figure>

<h2 id="安装使用"><a href="#安装使用" class="headerlink" title="安装使用"></a>安装使用</h2><ol>
<li><p>搜索并下载镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search portainer</span><br><span class="line">docker pull portainer/portainer</span><br></pre></td></tr></table></figure>
</li>
<li><p>单机方式运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">-p 9000:9000 \　　　# portainer 默认端口是 9000，映射到本地 9000 端口，通过本地地址访问</span><br><span class="line">--restart=always \　　# 设置自动重启</span><br><span class="line">-v /var/run/docker.sock:/var/run/docker.sock \　　# 单机必须指定docker.sock</span><br><span class="line">--name Prtainer portainer/portainer</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问<a href="http://localhost:9000" target="_blank" rel="noopener">http://localhost:9000</a><br>&emsp;&emsp;<strong>首次登陆需要注册用户，给 admin 用户设置密码，然后单机版选择 local 连接即可。</strong></p>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112153230740-1138499583.png" title="" data-fancybox="images"><img src="1059616-20191112153230740-1138499583.png" alt title class></a>
                <p></p>
            </figure>
</li>
<li><p>控制管理</p>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112153611631-1158270908.png" title="" data-fancybox="images"><img src="1059616-20191112153611631-1158270908.png" alt title class></a>
                <p></p>
            </figure>

</li>
</ol>
<blockquote>
<p>更多可以参考：<a href="https://www.cnblogs.com/river2005/p/8283700.html" target="_blank" rel="noopener">Portainer 介绍</a></p>
</blockquote>
<h1 id="Docker-与集群管理工具-Swarm"><a href="#Docker-与集群管理工具-Swarm" class="headerlink" title="Docker 与集群管理工具 Swarm"></a>Docker 与集群管理工具 Swarm</h1><h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><p>&emsp;&emsp;Swarm 是 Docker 官方提供的一款集群管理工具，其主要作用是把若干台 Docker 主机抽象为一个整体，并且通过一个入口统一管理这些 Docker 主机上的各种 Docker 资源。</p>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112152657240-1084437635.png" title="" data-fancybox="images"><img src="1059616-20191112152657240-1084437635.png" alt title class></a>
                <p></p>
            </figure>

<h2 id="安装使用-1"><a href="#安装使用-1" class="headerlink" title="安装使用"></a>安装使用</h2><p>&emsp;&emsp;Swarm 在 Docker 1.12 版本之前属于一个独立的项目，在 Docker 1.12 版本发布之后，该项目合并到了 Docker 中，成为 Docker 的一个子命令。</p>
<ol>
<li>启动 swarm 集群只需要执行初始化命令即可：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker swarm init \　　　　　　　# 默认初始化节点为管理节点</span><br><span class="line">--advertise-addr xx.xx.xx.xx \　　　#指定使用的 ip</span><br><span class="line">--listen-addr xx.xx.xx.xx:2377　　　#指定监听 ip 和 port，默认为 2377</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191128171456606-615353300.png" title="" data-fancybox="images"><img src="1059616-20191128171456606-615353300.png" alt title class></a>
                <p></p>
            </figure>

<ol start="2">
<li><p>设置 manager 节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker swarm join-token manager　　　　#获取管理节点 token，放入下面命令</span><br><span class="line">docker swarm join \</span><br><span class="line">--advertise-addr xx.xx.xx.xx \</span><br><span class="line">--listen-addr xx.xx.xx.xx:2377 \</span><br><span class="line">--token SWMTKN-1-29ynh5uyfiiospy4fsm4pd4xucyji2rn0oj4b4ak4s7a37syf9-ajkrv2ctjr5cmxzuij75tbrmz \</span><br><span class="line">xx.xx.xx.xx:2377</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置 worker 节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker swarm join-token worker　　　　#获取工作节点 token，放入下面命令</span><br><span class="line">docker swarm join \</span><br><span class="line">--advertise-addr xx.xx.xx.xx \</span><br><span class="line">--listen-addr xx.xx.xx.xx:2377 \</span><br><span class="line">--token SWMTKN-1-29ynh5uyfiiospy4fsm4pd4xucyji2rn0oj4b4ak4s7a37syf9-ajkrv2ctjr5cmxzuij75tbrmz \</span><br><span class="line">xx.xx.xx.xx:2377</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker node ls</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191128172311278-1473171098.png" title="" data-fancybox="images"><img src="1059616-20191128172311278-1473171098.png" alt title class></a>
                <p></p>
            </figure>

<ol start="5">
<li>创建服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker service create [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br><span class="line">          --detach , -d:  指定容器运行于前台还是后台，默认为 false</span><br><span class="line">          --name:  服务名称</span><br><span class="line">          --network:  网络连接</span><br><span class="line">          --publish , -p:  端口映射</span><br><span class="line">          --env , -e:  设置环境变量</span><br><span class="line">          --tty , -t:  分配 tty 设备，该可以支持终端登录</span><br><span class="line">          --mount:  文件挂载</span><br><span class="line">          --replicas:  指定任务数量</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>更多参考：<a href="https://www.jianshu.com/p/028b40ca4f2a" target="_blank" rel="noopener">Docker Swarm 集群部署实践</a>&emsp;&emsp;<a href="https://www.cnblogs.com/xiangsikai/p/9935814.html" target="_blank" rel="noopener">Docker Swarm 常用命令</a></p>
</blockquote>
<h2 id="对比K8s究竟有何异同？"><a href="#对比K8s究竟有何异同？" class="headerlink" title="对比K8s究竟有何异同？"></a>对比K8s究竟有何异同？</h2><ol>
<li><strong>出生不同</strong><br>&emsp;&emsp;Google 根据其在 Linux 上容器管理经验，改造到 docker 管理上，就是 kubernetes。他的在许多方面表现良好,最重要的是构造于 Google 多年的宝贵经验之上。<br>&emsp;&emsp;kubernetes 并不是为了 docker 写的，kubernetes 把集群带到了一个全新的高度，代价是学习曲线比较陡。docker-swarm 使用了一个不同的方式,它是 docker 原生的集群工具。<br>&emsp;&emsp;最方便的部分是它暴露了 docker 标准的编程接口，意味着你之前一直在使用的任何与 docker 沟通的工具（docker CLI,  docker compose 等），都可以无缝的在 docker swarm 上使用。</li>
<li><strong>安装配置不同</strong><br>&emsp;&emsp;安装设置 swarm 非常简单，简单明了并且很灵活。我们需要做的就是安装一个服务发现工具，然后在所有的节点上安装 swarm 容器。<br>&emsp;&emsp;相比较而言，kubernetes 的安装就有点复杂晦涩了。不同的操作系统上安装都不同。每个操作系统都有自己的独立安装指令。</li>
<li><strong>运行方式不同</strong><br>&emsp;&emsp;使用 Swarm 和使用容器没有什么不同。比如，你习惯于使用 Docker CLI（命令行接口），你可以继续使用几乎相同的命令。<br>&emsp;&emsp;如果你习惯于使用 Docker Componse 来运行容器，你可以继续在 Swarm 集群中使用。不管你之前习惯于怎么使用容器，你仍旧可以使用，只是在更大级别的集群中使用。<br>&emsp;&emsp;Kubernetes 要求你去学习它自己的 CLI（命令行接口）和配置。你不能使用你之前创建的 docker-compose.yml 配置，你必须要去新建与 Kubernetes 对应的配置。<br>&emsp;&emsp;你也不能使用之前学习的 Docker CLI（命令行接口）。你必须要去学习 Kubernetes CLI（命令行接口）</li>
</ol>
<p>&emsp;&emsp;<strong>最后，当需要在 Docker Swarm 和 Kubernetes 做出选择时，可以考虑如下几点：</strong><br>&emsp;&emsp;你是否想依赖于 Docker 自己来解决集群的问题。如果是，选择 Swarm。如果某些功能在 Docker 中不支持，那它也非常可能在 Swarm 中找不到，因为 Swarm 是依赖于 Docker API 的。<br>&emsp;&emsp;另外一方面，如果你想要一个工具可以解决 Docker 的限制，Kubernetes 将是不错的选择。Kubernetes 不是基于 Docker，而是基于 Google 多年对于管理容器的经验。它是按照自己的方式来行事。  </p>
<h1 id="Docker-运维流程图"><a href="#Docker-运维流程图" class="headerlink" title="Docker 运维流程图"></a>Docker 运维流程图</h1><figure class="image-box">
                <a rel=Docker 实战总结 href="1059616-20191112152457727-1393157662.png" title="" data-fancybox="images"><img src="1059616-20191112152457727-1393157662.png" alt title class></a>
                <p></p>
            </figure>

<h1 id="Docker-配置管理"><a href="#Docker-配置管理" class="headerlink" title="Docker 配置管理"></a>Docker 配置管理</h1><h2 id="用了容器以后，还需要配置管理吗？"><a href="#用了容器以后，还需要配置管理吗？" class="headerlink" title="用了容器以后，还需要配置管理吗？"></a>用了容器以后，还需要配置管理吗？</h2><p>&emsp;&emsp;起初我们跟 Docker 官方一样，属于理想主义派。天真的认为容器就应该是 inmutable 的，当需要配置变更的时候，重新构建镜像重新部署。<br>&emsp;&emsp;基于这一思路，我们在 cSphere 中添加了个镜像自动构建模块，用户可以配置代码仓库的地址。<br>&emsp;&emsp;服务的配置文件保存于 Git 或者 SVN 库中，需要配置变更时，向版本库中 Push 一下，自动通过 hook 触发镜像构建，并自动完成线上容器的重建。<br>&emsp;&emsp;通过这套系统，用户可以非常方便的批量更新线上的服务，并不局限于配置文件的变更，代码的变更也天生支持。<br>&emsp;&emsp;经过实际使用，这套系统能够很好的满足开发和测试环境的需求，提升工作效率。<br>&emsp;&emsp;<strong>但是，在生产环境中使用的时候，我们发现这种流程其实并不那么完美，主要表现在：</strong><br>&emsp;&emsp;镜像构建和部署虽然自动化了，但构建是针对 VCS 中的某个仓库的，改一行配置就得整体重新构建一下，在更新容器时还需要把镜像重新分发到所有机器上，配置变更速度太慢。<br>&emsp;&emsp;这种方式的配置变更会涉及到服务的重启，这在生产环境某些场景下是不可接受的 ，有可能引起短暂的服务中断。  </p>
<h2 id="应用配置文件应该需要做到什么？"><a href="#应用配置文件应该需要做到什么？" class="headerlink" title="应用配置文件应该需要做到什么？"></a>应用配置文件应该需要做到什么？</h2><p>&emsp;&emsp;Docker 应用配置文件能够保持能够支持针对不同环境作出更改。另外配置文件支持在线更改，重启就生效。一般分为以下两种方式。</p>
<ol>
<li><strong>Docker 环境变量</strong><br>&emsp;&emsp;需要在制作镜像的时候就需要提前想好，有哪些参数是部署容器的时候会经常更改，<br>&emsp;&emsp;然后把这些参数抽出来做成容器的环境变量，然后在部署的容器的时候填入不同的参数即可。<br>&emsp;&emsp;但是如果后续发现有一些参数不同场景下部署的时候也会修改，那就需要再重新制作镜像了。</li>
<li><strong>应用配置文件</strong><br>&emsp;&emsp;上述的管理方式不太灵活，灵活的管理方式是将配置文件和镜像剥离开，这样就不会被镜像给绑定了。<br>&emsp;&emsp;<strong>注：最新版本可以参考 docker config 命令管理</strong></li>
</ol>
<h1 id="Docker-后续问题"><a href="#Docker-后续问题" class="headerlink" title="Docker 后续问题"></a>Docker 后续问题</h1><ul>
<li>集群环境</li>
<li>网络安全</li>
<li>存储管理</li>
<li>日志收集</li>
<li>实时监控</li>
<li>性能调优</li>
<li>……</li>
</ul>
<h1 id="Docker-报错解决"><a href="#Docker-报错解决" class="headerlink" title="Docker 报错解决"></a>Docker 报错解决</h1><p><a href="https://www.cnblogs.com/leozhanggg/p/11730189.html" target="_blank" rel="noopener">【解决】Got permission denied while trying to connect to the Docker daemon socket at……dial unix /var/run/docker.sock: permission denied</a><br><a href="https://www.cnblogs.com/leozhanggg/p/12031433.html" target="_blank" rel="noopener">【解决】error pulling image configuration: Get https:// …… x509: certificate has expired or is not yet valid</a><br><a href="https://www.cnblogs.com/leozhanggg/p/12023531.html" target="_blank" rel="noopener">【解决】image … could not be accessed on a registry to record its digest.</a><br><a href="https://www.cnblogs.com/leozhanggg/p/12023456.html" target="_blank" rel="noopener">【解决】http: server gave HTTP response to HTTPS client</a><br><a href="https://www.cnblogs.com/leozhanggg/p/12023429.html" target="_blank" rel="noopener">【解决】OCI runtime exec failed……executable file not found in $PATH”: unknown</a><br>更多报错解决方案持续更新中：<a href="https://www.cnblogs.com/leozhanggg/p/11796810.html" target="_blank" rel="noopener">【解决】Docker Errors</a>  </p>
<hr>
<blockquote>
<p>如果想更详细，更深入了解 Docker，推荐 &gt;&gt;&gt; <a href="https://www.cnblogs.com/codelove/p/10030439.html" target="_blank" rel="noopener">Docker 最全教程——从理论到实战（一）</a></p>
</blockquote>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2019-12-19T13:23:25.306Z" itemprop="dateUpdated">2019-12-19 21:23:25</time>
</span><br>


        
        转载注明出处，原文地址：<a href="/2019/12/19/DockerSummary/" target="_blank" rel="external">https://tao-lol.top/2019/12/19/DockerSummary/</a>
        
    </div>
    <footer>
        <a href="https://tao-lol.top">
            <img src="/img/avatar.jpg" alt="濤">
            濤
        </a>
    </footer>
</blockquote>

        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://tao-lol.top/2019/12/19/DockerSummary/&title=《Docker 实战总结》 — Blog&pic=https://tao-lol.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://tao-lol.top/2019/12/19/DockerSummary/&title=《Docker 实战总结》 — Blog&source=
https://www.cnblogs.com/leozhanggg/p/12039953.html
" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/12/19/HowToUseDDD/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">如何运用领域驱动设计</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/12/19/RabbitMQKnowledgePoints/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">RabbitMQ 知识点</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-简介"><span class="post-toc-number">1.</span> <span class="post-toc-text">Docker 简介</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-优势"><span class="post-toc-number">2.</span> <span class="post-toc-text">Docker 优势</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#特性优势"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">特性优势</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#资源优势"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">资源优势</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-基本概念"><span class="post-toc-number">3.</span> <span class="post-toc-text">Docker 基本概念</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-安装使用"><span class="post-toc-number">4.</span> <span class="post-toc-text">Docker 安装使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#操作系统：CentOS-7"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">操作系统：CentOS 7</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#运行示例：Nginx"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">运行示例：Nginx</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-常用命令"><span class="post-toc-number">5.</span> <span class="post-toc-text">Docker 常用命令</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#镜像控制"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">镜像控制</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#容器控制"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">容器控制</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#容器启动"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">容器启动</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其他命令"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">其他命令</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-镜像构建"><span class="post-toc-number">6.</span> <span class="post-toc-text">Docker 镜像构建</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Docker-commit（1-运行-2-修改-3-保存）"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">Docker commit（1 运行 2 修改 3 保存）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Dockerfile（1-编写-2-构建）"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">Dockerfile（1 编写 2 构建）</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-本地仓库"><span class="post-toc-number">7.</span> <span class="post-toc-text">Docker 本地仓库</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-与图形管理工具-Portainer"><span class="post-toc-number">8.</span> <span class="post-toc-text">Docker 与图形管理工具 Portainer</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#简介"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装使用"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">安装使用</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-与集群管理工具-Swarm"><span class="post-toc-number">9.</span> <span class="post-toc-text">Docker 与集群管理工具 Swarm</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#简介-1"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装使用-1"><span class="post-toc-number">9.2.</span> <span class="post-toc-text">安装使用</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#对比K8s究竟有何异同？"><span class="post-toc-number">9.3.</span> <span class="post-toc-text">对比K8s究竟有何异同？</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-运维流程图"><span class="post-toc-number">10.</span> <span class="post-toc-text">Docker 运维流程图</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-配置管理"><span class="post-toc-number">11.</span> <span class="post-toc-text">Docker 配置管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用了容器以后，还需要配置管理吗？"><span class="post-toc-number">11.1.</span> <span class="post-toc-text">用了容器以后，还需要配置管理吗？</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#应用配置文件应该需要做到什么？"><span class="post-toc-number">11.2.</span> <span class="post-toc-text">应用配置文件应该需要做到什么？</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-后续问题"><span class="post-toc-number">12.</span> <span class="post-toc-text">Docker 后续问题</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-报错解决"><span class="post-toc-number">13.</span> <span class="post-toc-text">Docker 报错解决</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>


</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://tao-lol.top" target="_blank">Home</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/hexojs/hexo" target="_blank">Hexo</a>
    </span>
    
    <span class="blogroll-item">
        <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">Mellow</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
        <p>
            <span>
                濤 &copy; 2018 - 2019
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            

            
                
<span class="site-uv" title="总访客量">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="总访问量">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>

            
        </p>
    </div>
</footer>

    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://tao-lol.top/2019/12/19/DockerSummary/&title=《Docker 实战总结》 — Blog&pic=https://tao-lol.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://tao-lol.top/2019/12/19/DockerSummary/&title=《Docker 实战总结》 — Blog&source=
https://www.cnblogs.com/leozhanggg/p/12039953.html
" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMUlEQVR42u3aQW6EQAwF0bn/pYkUZREpDNS3YRTcxQqRSdOPhWW3/Xrha/u+ft/zJ+Sv79a5+JIhQ8ZjGdvh9ZfBqe/eQnbC9yZDhox1GP0gS0jpJyPry5AhQ0Z6X3vCA7cMGTJkpAGXpHe15E+GDBkyakUsPzIj65MPdEstLkOGjAcyao2Bz9zf3t+QIUPGv2ds4cVDappo1vbzs4IMGTJGM8iB1/HzWpLXH+N4pZuTIUPGYxm8iZg2HTu/IZ91J9TKkCFjKKMWcO8Iu7VyWoYMGWsy+EF8JxB32qUn/Q0ZMmSMY5B/4CGvH2RraaIMGTLWZKThr3ZwdtkbZciQMZqRDj3wbsNVySXfiQwZMqYy0nTt7r4h34MMGTLWZHSalMVBLhziT1oUMmTIGM3gKV0/TTwO03xN1P6UIUPGOMbx0rXX107sj7/0CUmGDBlDGWTRziAFTwRbwVqGDBnLMPqH/sfr8PELHnx3Aq4MGTLGMWpbTF+ZFqhpa0GGDBmzGTzUpild+svWCjJkyFiAkR7f8/EvUvqm6ePOu2TIkDGawY+60ic8WUyHw1DYlSFDxiBGf5yLF6VpQhmUzTJkyBjNqBWT/Pdp2E1r0hgjQ4aMxzJqoxWdOYdimcq/nAwZMoYySJGZHsP1w3FQQsuQIUMGHhHjCV+t6G2dGsqQIWMxxrVjqfwTnJwdypAhYzSjMzaRhtQUhopbGTJkjGakBSQH8wO7tFS+oL8hQ4aMZzC+AGBP8C45cqz7AAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.4.4"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.js"></script>

<script type="text/javascript" src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/blog.js?v=1.4.4"></script>

<!-- third-party -->






<script type="text/javascript" src="/js/plugins/local_search.js?v=1.4.4"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>







    
</body>
</html>
